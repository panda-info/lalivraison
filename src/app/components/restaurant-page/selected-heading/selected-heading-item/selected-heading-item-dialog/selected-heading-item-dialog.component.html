<div class="selected-heading-item-dialog__container">

  <div class="selected-heading-item-dialog__top">

      <button mat-icon-button
              class="selected-heading-item-dialog__top-close-button"
              [mat-dialog-close]="true">
        <mat-icon class="selected-heading-item-dialog__top-close-button-icon">close</mat-icon>
      </button>
    <img [src]="'data:image/png;base64,' + data.item.image"
         class="selected-heading-item-dialog__top-image">
  </div>

  <div class="selected-heading-item-dialog__content">

    <div class="selected-heading-item-dialog__lower-zone-name">
      {{data.item.name | uppercase}}
    </div>

    <div class="selected-heading-item-dialog__lower-zone-description">
      {{data.item.description}}
    </div>

    <!--Compositions-->
    <div *ngIf="item.compositions">
      <div *ngFor="let composition of selectedComposition"
           class="selected-heading-item-dialog__content-items-container">
        <div class="selected-heading-item-dialog__content-items-container-composition-name">
          {{composition.name}}
        </div>
        <mat-checkbox *ngFor="let i of composition.items"
                      (change)="updatePrice()"
                      [(ngModel)]="i.selected"
                      class="selected-heading-item-dialog__content-items-container-composition-item"
                      color="primary">
          <div class="selected-heading-item-dialog__content-items-container-composition-item-label">
            <span>{{i.name}}</span>
            <span>{{i.price}} Dhs</span>
          </div>
        </mat-checkbox>
      </div>
    </div>


    <!--DÃ©clinaisons-->
    <div *ngIf="data.item.declinations">
      <mat-radio-group [(ngModel)]="selectedDeclination"
                       class="selected-heading-item-dialog__content-items-container">
        <mat-radio-button *ngFor="let declination of data.item.declinations.values"
                          class="selected-heading-item-dialog__content-items-container-declination-item"
                          color="primary"
                          [value]="declination">
          <div class="selected-heading-item-dialog__content-items-container-declination-item-label">
            <span>{{declination.name}}</span>
            <span>{{declination.price}} Dhs</span>
          </div>
        </mat-radio-button>

      </mat-radio-group>
    </div>


    <!--Formule-->
    <div *ngIf="item.formula">
      <mat-radio-group *ngFor="let category of selectedFormula"
                       [(ngModel)]="category.selectedItem"
                       class="selected-heading-item-dialog__content-items-container">
        <div class="selected-heading-item-dialog__content-items-container-formula-name">
          {{category.name}}
        </div>
        <mat-radio-button *ngFor="let i of category.items"
                          class="selected-heading-item-dialog__content-items-container-formula-label"
                          color="primary"
                          [value]="i">
          &nbsp;&nbsp;&nbsp;&nbsp;{{i.name}}
        </mat-radio-button>
      </mat-radio-group>
    </div>


  </div>

  <div class="selected-heading-item-dialog__bottom">
    <div class="selected-heading-item-dialog__bottom-container">
      <div class="selected-heading-item-dialog__bottom-price" *ngIf="!data.item.declinations">
        {{data.item.price * itemCount}} Dhs
      </div>
      <div class="selected-heading-item-dialog__bottom-price" *ngIf="data.item.declinations && selectedDeclination">
        {{selectedDeclination.price * itemCount}} Dhs
      </div>

      <div class="selected-heading-item-dialog__bottom-counter">
        <button mat-icon-button
                style="background-color: #ed145b"
                (click)="decrementCount()"
                class="selected-heading-item-dialog__bottom-counter-button">
          <mat-icon class="selected-heading-item-dialog__bottom-counter-button-icon">remove</mat-icon>
        </button>
        <span style="font-weight: bold">{{itemCount}}</span>
        <button mat-icon-button
                (click)="incrementCount()"
                class="selected-heading-item-dialog__bottom-counter-button">
          <mat-icon class="selected-heading-item-dialog__bottom-counter-button-icon">add</mat-icon>
        </button>
      </div>

      <button [mat-dialog-close]="true"
              (click)="addToBasket()"
              [disabled]="disableButton()"
              mat-icon-button
              class="selected-heading-item-dialog__bottom-button"
              color="primary">
        <mat-icon>shopping_cart</mat-icon>
      </button>
    </div>

  </div>

</div>
